this.hsDatab=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})};function r(e){return t=>new Promise(n=>{setTimeout(()=>{n(t)},e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.timeout=function(e){return new Promise((t,n)=>{setTimeout(n,e)})},t.delay=r,t.Pace=class{constructor(e=100,t=-1){this.maxConcurrent=-1,this.waitUntil=0,this.waitCount=0,this.beingCalled=0,this.pace=e+5,this.maxConcurrent=t}getWaitCount(){return this.waitCount}getCallingCount(){return this.beingCalled}add(e){return o(this,void 0,void 0,function*(){const t=Date.now();this.waitUntil<t&&(this.waitUntil=t);const n=this.waitUntil-t;this.waitUntil+=this.pace+5,this.waitCount++,yield r(n)(),yield new Promise(e=>{const t=()=>{this.maxConcurrent<0||this.beingCalled<this.maxConcurrent?e():setTimeout(t,10)};t()}),this.waitCount--,this.beingCalled++;const o=yield e(Date.now()-t);return this.beingCalled--,o})}},t.promiseChain=function(e,t=[]){return e.reduce((e,t)=>e.then(e=>Promise.resolve(t(e)).then(t=>(e.push(t),e))),Promise.resolve(t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(4),r=n(5).log("hsData");class i{constructor(e){this.data=[],this.meta=[],e&&this.importData(e)}getName(){return this.name}importData(e){if(this.name="data"+Math.round(1e3*Math.random()),e)if(e instanceof Array){const t=e[0],n=e.slice(1);this.setData(n,t)}else e.name&&(this.name=e.name),this.setData(e.rows,e.colNames)}export(){return{rows:this.getData(),colNames:this.colNames()}}getData(){return this.data}getColumn(e){const t=this.colNumber(e);return this.data.map(e=>e[t])}colAdd(e){let t=this.getMeta(e);return void 0===t&&((t=this.meta[e]={}).name=e,t.column=this.meta.length,this.meta.push(t),t.cast=!1,t.accessed=!1),t}colInitialize(e,t){const n="function"==typeof t;let o=this.getMeta(e);if(!o){if("string"!=typeof e)throw new Error(`column ${e} does not exist in Data`);o=this.colAdd(e)}return this.data.map((e,r)=>e[o.column]=n?t(e[o.column],r,e):t),o.column}colNumber(e){const t=this.getMeta(e);return t?(t.accessed=!0,t.column):void 0}colName(e){var t=this.getMeta(e);if(t)return t.accessed=!0,t.name}colNames(){return this.meta.map(e=>e.name)}colType(e){const t=this.getMeta(e);return t?t.types[0].type:i.type.name}findDomain(e,t){if(void 0===t&&(t=[]),void 0===e)t[0]=0,t[1]=this.data.length-1;else{const n=this.colNumber(e);switch(this.colType(e)){case i.type.name:this.data.forEach(e=>{const o=t;o.indexOf(""+e[n])<0&&o.push(""+e[n])});break;case i.type.date:this.data.forEach(e=>{let o=this.toDate(e[n]);void 0===t[0]&&(t[0]=o),void 0===t[1]&&(t[1]=o),null!=o&&(o<t[0]?t[0]=o:o>t[1]&&(t[1]=o))});break;default:this.data.forEach(e=>{let o=parseFloat(e[n].toString());void 0===t[0]&&(t[0]=o),void 0===t[1]&&(t[1]=o),null!=o&&(o<t[0]?t[0]=o:o>t[1]&&(t[1]=o))})}}return t}castData(){this.meta.forEach(e=>{const t=e.column;e.cast||this.data.forEach(n=>n[t]=this.castVal(e.types[0].type,n[t])),e.cast=!0})}filter(e){return o.filter(this,e)}sort(e,t){let n=e;return t?(t=this.colNumber(t),"descending"===e&&(n=(e,t)=>t>e?1:t<e?-1:0),"ascending"===e&&(n=(e,t)=>t<e?1:t>e?-1:0),this.data.sort((e,o)=>n(e[t],o[t]))):this.data.sort(n),this}map(e,t){const n=e=>e;let o=function(){let t;switch(e){case"cumulate":t=(()=>{let e=0;return(t,n)=>e+=+t})();break;case"noop":t=n;break;default:t=e}return t}();const r=t?this.colNumber(t):void 0;return new i({colNames:this.colNames(),rows:this.data.map((e,t,n)=>(r?e[r]=o(e[r],r,t,n):n[t]=o(e,t,n),e)),name:this.getName()})}getMeta(e){if(this.meta[e])return this.meta[e].accessed=!0,this.meta[e]}setData(e,t,n=!0){this.meta=[],this.data=e.slice(),t&&t.forEach?(t.forEach(e=>this.colAdd(e)),n&&(t.forEach(e=>this.findTypes(e)),this.castData())):r.warn(`invalid names setData:\n${r.inspect(t,5)}`)}findTypes(e){const t=this.getMeta(e),n=[];Object.keys(i.type).forEach(e=>{const t={type:i.type[e],count:0};n.push(t),n[i.type[e]]=t});for(let t of this.allRows(e)){const e=this.findType(t);null!==e&&n[e].count++}return n.sort(function(e,t){return"currency"===e.type&&e.count>0?-1:"currency"===t.type&&t.count>0?1:t.count-e.count}),t.types=n,n[0].type}findType(e){if(e&&""!==e){if(e instanceof Date)return i.type.date;if("number"==typeof e)return i.type.number;const t=""+e;if(""+parseFloat(t)===t)return i.type.number;if(t.startsWith("$")&&!isNaN(parseFloat(t.slice(1))))return i.type.currency;if(t.endsWith("%")&&!isNaN(parseFloat(t)))return i.type.percent;if(!isNaN(this.toDate(t).getTime()))return i.type.date;switch(t.toLowerCase()){case"null":case"#ref!":break;default:if(e.length>0)return i.type.name}}return null}*allRows(e){const t=this.colNumber(e);for(let e=0;e<this.data.length;e++)yield this.data[e][t]}toDate(e,t=1970){let n;if(e instanceof Date)n=e;else if(n=new Date(e),!isNaN(n.getTime())){const o=new RegExp(`\\d\\d${n.getFullYear()%100}`,"g");if(!e.match(o)){const e=1900+n.getFullYear()%100;n.setFullYear(e<t?e+100:e)}}return n}castVal(e,t){let n=t;switch(e){case i.type.date:if(t instanceof Date)return t;n=this.toDate(t),isNaN(n.getTime())&&(n=null);break;case i.type.percent:if("string"==typeof t){const e=parseFloat(t);n=t.endsWith("%")?e/100:e}else n=t;isNaN(n)&&(n=null);break;case i.type.currency:n="string"==typeof t?t.replace(/[^eE\+\-\.\d]/g,""):t;case i.type.number:"string"==typeof n&&(n=parseFloat(n)),isNaN(n)&&(n=null);break;default:n=""+t}return n}}i.type={number:"number",name:"name",date:"date",currency:"currency",percent:"percent"},t.Data=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=[["Jan","January"],["Feb","February"],["Mar","March"],["Apr","April"],["May","May"],["Jun","June"],["Jul","July"],["Aug","August"],["Sep","September"],["Oct","October"],["Nov","November"],["Dec","December"]],r=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]];function i(e,t){for(var n=""+e;n.length<t;)n="0"+n;return n}t.date=function(e,t=new Date){return"string"!=typeof e||isNaN(t.getTime())?"invalid":e.replace(/%YYYY/g,""+t.getFullYear()).replace(/%YY/g,""+t.getFullYear()%100).replace(/%MMMM/g,o[t.getMonth()][1]).replace(/%MMM/g,o[t.getMonth()][0]).replace(/%MM/g,i(t.getMonth()+1,2)).replace(/%M/g,""+(t.getMonth()+1)).replace(/%DDDD/g,r[t.getDay()][1]).replace(/%DDD/g,r[t.getDay()][0]).replace(/%DD/g,i(t.getDate(),2)).replace(/%D/g,""+t.getDate()).replace(/%hh/g,i(t.getHours(),2)).replace(/%h/g,""+t.getHours()).replace(/%mm/g,i(t.getMinutes(),2)).replace(/%m/g,""+t.getMinutes()).replace(/%ss/g,i(t.getSeconds(),2)).replace(/%jjj/g,i(t.getMilliseconds(),3)).replace(/%jj/g,i(t.getMilliseconds()/10,2)).replace(/%j/g,i(t.getMilliseconds()/100,1))},t.ms={fromMinutes:e=>6e4*e,fromHours:e=>36e5*e,fromDays:e=>864e5*e,fromWeeks:e=>6048e5*e,toMinutes:e=>e/6e4,toHours:e=>e/36e5,toDays:e=>e/864e5,toWeeks:e=>e/6048e5}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1);t.Data=o.Data},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(1);function r(e,t,n,o){const r=o(e),i="function"==typeof t,a="object"==typeof t&&void 0!==t.length;return isNaN(r)?(console.log(`column name '${e}' cannot be resolved in terminal condition ${e}=${t}`),console.log(n),!1):i?t(n[r],n):a?0===t.length||t.some(e=>n[r]===e):n[r]===t}t.filter=function(e,t){const n=t=>e.colNumber(t);try{return new o.Data({name:e.getName(),colNames:e.colNames(),rows:e.getData().filter((e,o)=>(function e(t,n,o,i,a){let s=!1,c=!0;if(void 0===t)return!0;if("number"==typeof t)return t===o;if("object"!=typeof t)return console.error(`unrecognized condition: ${JSON.stringify(t)}`),!1;{const l=t;if(void 0!==l.length)return void 0===a&&(a=!1),0!==l.length&&(a?l.every(t=>e(t,n,o,i,a)):l.some(t=>e(t,n,o,i,a)));void 0===a&&(a=!0);for(const l in t){let u=a;const d=t;switch(l){case"or":u=e(d.or,n,o,i,!1);break;case"and":u=e(d.and,n,o,i,!0);break;case"not":u=!e(d.not,n,o,i);break;default:u=r(l,t[l],n,i)}if(u){if(s=!0,!a)break}else if(c=!1,a)break}}return a?c:s})(t,e,o,n))})}catch(e){console.log(e),console.log(e.stack)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.timeout=o.timeout,t.delay=o.delay;var r=n(0);t.Pace=r.Pace;var i=n(0);t.promiseChain=i.promiseChain;var a=n(6);t.shortCheckSum=a.shortCheckSum;var s=n(2);t.date=s.date,t.ms=s.ms;var c=n(7);t.round=c.round;var l=n(8);t.log=l.log},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shortCheckSum=function(e){for(var t=305419896,n=e.length,o=0;o<n;o++)t+=e.charCodeAt(o)*(o+1);return(4294967295&t).toString(16)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.round=function(e,t=0){const n=Math.pow(10,t);return""+Math.round(e*n)/n}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,s)}c((o=o.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=Symbol("DEBUG"),a=Symbol("INFO"),s=Symbol("WARN"),c=Symbol("ERROR");let l;const u={[i]:{importance:0,sym:i,desc:"DEBUG"},[a]:{importance:1,sym:a,desc:"INFO"},[s]:{importance:2,sym:s,desc:"WARN"},[c]:{importance:3,sym:c,desc:"ERROR"}};let d=u[a];const f="%YYYY%MM%DD %hh:%mm:%ss.%jjj";let h=f,p=!1;const m={red:"[31m",yellow:"[33m",blue:"[36m",green:"[32m",bold:"[1m",clear:"[0m"};t.log=function e(t,n,g){const y={level:void 0,prefix:t,logToFile:n,pathExists:g};function v(e,t=!1){let n=u[e]||d,o=y.level||d;if(void 0===e)n=o;else if(null===e)y.level=void 0;else if(u[e]){t?d=n:y.level=n;const e=`new ${t?"global":y.prefix} log level ${n.desc.toUpperCase()} (was ${o.desc.toUpperCase()})`;N(n.sym===o.sym?i:a,e)}else N(c,`unkown level ${e.toString()}; log level remains ${o.sym.toString()}`);return n.sym}function b(e,t=!0){return o(this,void 0,void 0,function*(){return yield N(a,e,t)})}function D(e,t=!0){return o(this,void 0,void 0,function*(){return yield N(s,e,t)})}function M(e,t=!0){return o(this,void 0,void 0,function*(){return yield N(c,e,t)})}function w(e){return null===e?h=f:e&&(h=e),h}function N(e,t,n=!0){return o(this,void 0,void 0,function*(){const o={[c]:m.red+m.bold,[s]:m.yellow+m.bold,[i]:m.blue,[a]:m.green};let f=u[e];const g=y.level||d;if(f.importance>=g.importance){const i=r.date(h);let a="string"==typeof t?t:$(t,0);const s=`${i} ${y.prefix} ${f.desc} ${a}`,c=`${o[e]||""} ${i} ${y.prefix} ${f.desc} ${m.clear} ${a}`;if(console.log(p?c:s),t&&t.stack&&console.log(t.stack),l&&n)return yield y.logToFile(r.date(l),s)}})}function $(e,t=1,n="",o){return o&&(n=n.replace(/ /g,"&nbsp;")),function e(t,r,i,a){if(null===t)return"null";if(void 0===t)return"undefined";if("function"==typeof t)return"function";if("string"==typeof t)return`'${t}'`;if("object"==typeof t){if(r<0)return void 0===t.length?"{...}":"[...]";if(void 0!==t.length)return`[${t.map(t=>void 0===t?"":e(t,r-1,i+1,a)).join(", ")}]`;const s=`${o?`<b><span style='color:${o[i%o.length]};'>`:""}${a}${n}`,c=o?"</span></b>":"";return"{\n"+Object.keys(t).map(o=>`${s}${o}${c}: ${e(t[o],r-1,i+1,a+n)}`).join(",\n")+`\n${a}}`}return t.toString()}(e,null===t?999:t,0,"")}const j=function(t,n=y.logToFile,o=y.pathExists){return e(t,n,o)};return j.DEBUG=i,j.INFO=a,j.WARN=s,j.ERROR=c,j.level=v,j.debug=function(e,t=!0){return o(this,void 0,void 0,function*(){return yield N(i,e,t)})},j.info=b,j.warn=D,j.error=M,j.format=w,j.prefix=function(e){return e&&(y.prefix=e),y.prefix},j.out=N,j.logFile=function(e){return o(this,void 0,void 0,function*(){return null===e?(l=void 0,yield b("disabling logfile")):void 0===e?r.date(l):e.indexOf("/")>=0?yield y.pathExists(e).then(t=>o(this,void 0,void 0,function*(){return t?(l=e,yield b("now logging to file "+r.date(e))):(l=void 0,yield D(`path '${e}' doesn't exists; logfile disabled`))})).catch(()=>o(this,void 0,void 0,function*(){return l=void 0,yield M(`checking path ${e}; logfile disabled`)})):(""===e&&(e="log-%YYYY-%MM-%DD.txt"),yield b((l=e)?`now logging to file ${r.date(l)}`:"logfile disbaled"))})},j.config=function(e){void 0!==e.colors&&(p=e.colors),void 0!==e.format&&w(e.format),void 0!==e.level&&v(e.level)},j.inspect=$,j}("",(e,t)=>Promise.resolve(void 0),e=>Promise.resolve(!(e.indexOf("/")>=0)))}]);